{"ast":null,"code":"import _classCallCheck from \"/home/moe/Development/corona/covid19-dashboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/moe/Development/corona/covid19-dashboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/moe/Development/corona/covid19-dashboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/moe/Development/corona/covid19-dashboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/moe/Development/corona/covid19-dashboard/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/moe/Development/corona/covid19-dashboard/src/components/PieChart.js\";\nimport React, { Component } from \"react\";\nimport Plot from \"react-plotly.js\";\nimport colormap from \"colormap\";\nimport countryData from \"./countries\";\nimport Loading from \"./Loading\";\nimport translate from \"./translation\";\nvar countries = countryData[1];\n\nvar PieChart =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(PieChart, _Component);\n\n  function PieChart() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, PieChart);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(PieChart)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      selector: \"confirmed\"\n    };\n\n    _this.handleOnClick = function (selected) {\n      _this.setState({\n        selector: selected\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(PieChart, [{\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      if (prevProps.loading !== this.props.loading) {\n        this.setState({\n          loading: !this.props.loading\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var selectors = [\"confirmed\", \"deaths\", \"recovered\"];\n      var buttons = selectors.map(function (type) {\n        return React.createElement(\"button\", {\n          className: _this2.state.selector === type ? \"btn btn-outline-dark clicked\" : \"btn btn-outline-dark\",\n          style: {\n            padding: \"0vh 3.35vh 0vh 3.35vh\"\n          },\n          onClick: function onClick() {\n            return _this2.handleOnClick(type);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 29\n          },\n          __self: this\n        }, React.createElement(\"font\", {\n          style: {\n            fontSize: \"1.5vh\"\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 38\n          },\n          __self: this\n        }, _this2.props.language ? type : translate[type]));\n      });\n      var confirmedData = this.props.data[0];\n      var deathsData = this.props.data[1];\n      var recoveredData = this.props.data[2];\n      var confirmedX = [],\n          confirmedY = [];\n      confirmedData.map(function (country) {\n        confirmedX.push(country.name);\n        confirmedY.push(country.confirmed);\n      });\n      var deathsX = [],\n          deathsY = [];\n      deathsData.map(function (country) {\n        deathsX.push(country.name);\n        deathsY.push(country.deaths);\n      });\n      var recoveredX = [],\n          recoveredY = [];\n      recoveredData.map(function (country) {\n        recoveredX.push(country.name);\n        recoveredY.push(country.recovered);\n      });\n      var colorway = colormap({\n        colormap: \"jet\",\n        nshades: countries.length,\n        format: \"hex\",\n        alpha: 1\n      });\n      var data = null;\n\n      if (this.state.selector === \"confirmed\") {\n        data = [{\n          values: confirmedY,\n          labels: confirmedX,\n          type: \"pie\",\n          textinfo: \"label\",\n          rotation: \"-20\"\n        }];\n      } else if (this.state.selector === \"deaths\") {\n        data = [{\n          values: deathsY,\n          labels: deathsX,\n          type: \"pie\",\n          textinfo: \"label\",\n          rotation: \"-20\"\n        }];\n      } else {\n        data = [{\n          values: recoveredY,\n          labels: recoveredX,\n          type: \"pie\",\n          textinfo: \"label\",\n          rotation: \"-20\"\n        }];\n      }\n\n      if (this.props.loading && data) {\n        return React.createElement(Loading, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 110\n          },\n          __self: this\n        });\n      }\n\n      return React.createElement(\"div\", {\n        className: \"padded\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        style: {\n          padding: \"0.25rem 0.0rem 0.5rem 0.0rem\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      }, \" \", buttons), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }, React.createElement(Plot, {\n        data: data,\n        layout: {\n          modebar: {\n            bgcolor: \"rgba(255,255,255,0)\"\n          },\n          font: {\n            color: \"#99aab5\",\n            size: 11\n          },\n          showlegend: false,\n          colorway: colorway.reverse(),\n          plot_bgcolor: \"#191d20\",\n          paper_bgcolor: \"#191d20\",\n          height: 350,\n          autosize: true,\n          margin: {\n            l: 10,\n            r: 10,\n            t: 5,\n            b: 5,\n            pad: 0\n          }\n        },\n        config: {\n          modeBarButtonsToRemove: [\"toggleSpikelines\", \"zoomIn2d\", \"zoomOut2d\", \"autoScale2d\", \"hoverClosestCartesian\", \"hoverCompareCartesian\", \"hoverClosestPie\"],\n          displaylogo: false\n        },\n        useResizeHandler: true,\n        style: {\n          width: \"100%\",\n          height: \"100%\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return PieChart;\n}(Component);\n\nexport default PieChart;","map":{"version":3,"sources":["/home/moe/Development/corona/covid19-dashboard/src/components/PieChart.js"],"names":["React","Component","Plot","colormap","countryData","Loading","translate","countries","PieChart","state","selector","handleOnClick","selected","setState","prevProps","loading","props","selectors","buttons","map","type","padding","fontSize","language","confirmedData","data","deathsData","recoveredData","confirmedX","confirmedY","country","push","name","confirmed","deathsX","deathsY","deaths","recoveredX","recoveredY","recovered","colorway","nshades","length","format","alpha","values","labels","textinfo","rotation","modebar","bgcolor","font","color","size","showlegend","reverse","plot_bgcolor","paper_bgcolor","height","autosize","margin","l","r","t","b","pad","modeBarButtonsToRemove","displaylogo","width"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport Plot from \"react-plotly.js\";\nimport colormap from \"colormap\";\nimport countryData from \"./countries\";\nimport Loading from \"./Loading\";\nimport translate from \"./translation\";\n\nconst countries = countryData[1];\n\nclass PieChart extends Component {\n  state = {\n    selector: \"confirmed\"\n  };\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.loading !== this.props.loading) {\n      this.setState({ loading: !this.props.loading });\n    }\n  }\n\n  handleOnClick = selected => {\n    this.setState({ selector: selected });\n  };\n\n  render() {\n    const selectors = [\"confirmed\", \"deaths\", \"recovered\"];\n\n    const buttons = selectors.map(type => (\n      <button\n        className={\n          this.state.selector === type\n            ? \"btn btn-outline-dark clicked\"\n            : \"btn btn-outline-dark\"\n        }\n        style={{ padding: \"0vh 3.35vh 0vh 3.35vh\" }}\n        onClick={() => this.handleOnClick(type)}\n      >\n        <font style={{ fontSize: \"1.5vh\" }}>\n          {this.props.language ? type : translate[type]}\n        </font>\n      </button>\n    ));\n\n    const confirmedData = this.props.data[0];\n    const deathsData = this.props.data[1];\n    const recoveredData = this.props.data[2];\n\n    let confirmedX = [],\n      confirmedY = [];\n    confirmedData.map(country => {\n      confirmedX.push(country.name);\n      confirmedY.push(country.confirmed);\n    });\n\n    let deathsX = [],\n      deathsY = [];\n    deathsData.map(country => {\n      deathsX.push(country.name);\n      deathsY.push(country.deaths);\n    });\n\n    let recoveredX = [],\n      recoveredY = [];\n    recoveredData.map(country => {\n      recoveredX.push(country.name);\n      recoveredY.push(country.recovered);\n    });\n\n    const colorway = colormap({\n      colormap: \"jet\",\n      nshades: countries.length,\n      format: \"hex\",\n      alpha: 1\n    });\n\n    let data = null;\n    if (this.state.selector === \"confirmed\") {\n      data = [\n        {\n          values: confirmedY,\n          labels: confirmedX,\n          type: \"pie\",\n          textinfo: \"label\",\n          rotation: \"-20\"\n        }\n      ];\n    } else if (this.state.selector === \"deaths\") {\n      data = [\n        {\n          values: deathsY,\n          labels: deathsX,\n          type: \"pie\",\n          textinfo: \"label\",\n          rotation: \"-20\"\n        }\n      ];\n    } else {\n      data = [\n        {\n          values: recoveredY,\n          labels: recoveredX,\n          type: \"pie\",\n          textinfo: \"label\",\n          rotation: \"-20\"\n        }\n      ];\n    }\n\n    if (this.props.loading && data) {\n      return <Loading />;\n    }\n    return (\n      <div className=\"padded\">\n        <div style={{ padding: \"0.25rem 0.0rem 0.5rem 0.0rem\" }}>\n          {\" \"}\n          {buttons}\n        </div>\n\n        <div>\n          <Plot\n            data={data}\n            layout={{\n              modebar: { bgcolor: \"rgba(255,255,255,0)\" },\n              font: { color: \"#99aab5\", size: 11 },\n              showlegend: false,\n              colorway: colorway.reverse(),\n              plot_bgcolor: \"#191d20\",\n              paper_bgcolor: \"#191d20\",\n              height: 350,\n              autosize: true,\n              margin: { l: 10, r: 10, t: 5, b: 5, pad: 0 }\n            }}\n            config={{\n              modeBarButtonsToRemove: [\n                \"toggleSpikelines\",\n                \"zoomIn2d\",\n                \"zoomOut2d\",\n                \"autoScale2d\",\n                \"hoverClosestCartesian\",\n                \"hoverCompareCartesian\",\n                \"hoverClosestPie\"\n              ],\n              displaylogo: false\n            }}\n            useResizeHandler={true}\n            style={{ width: \"100%\", height: \"100%\" }}\n          />\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default PieChart;\n"]},"metadata":{},"sourceType":"module"}